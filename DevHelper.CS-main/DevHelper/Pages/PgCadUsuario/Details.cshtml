@page
@model DevHelper.Razor.Pages.PgCadUsuario.DetailsModel
@using System.Security.Claims
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

@{
    var user = HttpContextAccessor.HttpContext.User;
    var userId = user.FindFirstValue(ClaimTypes.NameIdentifier);
    var userName = user.FindFirstValue(ClaimTypes.Name);
}

@* @{
    ViewData["Title"] = "Details";
} *@

<h1 class="d-flex justify-content-between align-items-center">
    @Html.DisplayFor(model => model.Usuario.Nome)
    @if (userId == Model.Usuario.Id.ToString())
    {
        <form method="post" asp-page-handler="Logout" class="m-0 p-0">
            <button type="submit" class="btn btn-danger">Logout</button>
        </form>
    }
</h1>

<div>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Usuario.Biografia)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Usuario.Biografia)
        </dd>
    </dl>
</div>

<div class="row">
    <div class="col-md-6">
        <h3>Problemas</h3>
        <ul>
            @foreach (var problema in Model.Problemas)
            {
                <li>
                    <a asp-page="/PgProblema/Details" asp-route-id="@problema.Id">@problema.Nome</a>
                </li>
            }
        </ul>
    </div>
    <div class="col-md-6">
        <h3>Soluções</h3>
        <ul>
            @foreach (var solucao in Model.Solucoes)
            {
                <li>
                    <a asp-page="/PgSolucao/Details" asp-route-id="@solucao.Id">@solucao.Problema.Nome</a>
                </li>
            }
        </ul>
    </div>
</div>

<div>
    <a asp-page="/PgProblema/Index">Voltar ao Feed</a>
</div>



@* <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Usuario.Nome)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Usuario.Nome)
        </dd> *@
@* <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.Usuario.Email)
        </dt>
        <dd class="col-sm-10">
        @Html.DisplayFor(model => model.Usuario.Email)
        </dd> *@
@* <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.Usuario.Senha)
        </dt>
        <dd class="col-sm-10">
        @Html.DisplayFor(model => model.Usuario.Senha) *@